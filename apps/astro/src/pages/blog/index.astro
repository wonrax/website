---
import { getCollection, getEntry } from "astro:content";
import BlogRouteLayout from "@/layouts/BlogRouteLayout.astro";

const allPosts = await Astro.glob("./**/*.mdx");
console.log("allPosts", allPosts);
console.log("postUrl", allPosts[0].url);
---

<BlogRouteLayout>
  <div class="mx-auto max-w-[732px] mt-4 h-full">
    <p class="px-4 py-2 font-medium text-lg text-gray-400">2023</p>
    <ul class="flex flex-col transition-all">
      {
        allPosts.map((post) => (
          <li>
            <a href={post.url}>
              <div class="flex flex-row rounded-lg p-4 justify-between items-start group hover:bg-gray-900 hover:bg-opacity-5">
                <div class="flex flex-col gap-2 items-stretch">
                  <h3 class="leading-none font-medium text-gray-800">
                    {post.frontmatter.title}
                  </h3>
                  <p class="text-sm leading-none text-gray-500">
                    {post.frontmatter.description}
                  </p>
                </div>

                <p class="text-xs font-medium leading-none tracking-wide text-gray-500">
                  {new Date(post.frontmatter.published)
                    .toLocaleDateString("en-UK", {
                      year: "numeric",
                      month: "long",
                      day: "numeric",
                    })
                    .toUpperCase()}
                </p>
              </div>
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</BlogRouteLayout>
